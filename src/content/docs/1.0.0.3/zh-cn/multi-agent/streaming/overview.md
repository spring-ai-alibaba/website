---
title: 流式输出概览
description: Spring AI Alibaba Graph 流式处理系统概述
---

# 流式输出概览

Spring AI Alibaba Graph 实现了一个强大的流式处理系统，能够提供实时更新，为用户提供响应式和透明的体验。

## 什么是流式输出

流式输出允许您从图执行中获得实时反馈。主要有三类数据可以进行流式处理：

1. **工作流进度** — 在每个图节点执行后获取状态更新
2. **LLM 令牌** — 在语言模型生成令牌时进行流式传输
3. **自定义更新** — 发出用户定义的信号（例如，"已获取 10/100 条记录"）

## Spring AI Alibaba Graph 流式处理的功能

- **流式 LLM 令牌** — 从任何地方捕获令牌流：节点内部、子图或工具中
- **从工具发出进度通知** — 直接从工具函数发送自定义更新或进度信号
- **流式传输子图输出** — 包含来自父图和任何嵌套子图的输出
- **支持任何 LLM** — 即使不是 Spring AI 模型，也可以使用自定义流式模式从任何 LLM 流式传输令牌
- **多种流式模式** — 选择不同的流式模式：`values`（完整状态）、`updates`（状态增量）、`messages`（LLM 令牌 + 元数据）、`custom`（任意用户数据）或 `debug`（详细跟踪）

## 支持的流式模式

将以下一种或多种流式模式作为列表传递给 [`stream()`](../../../api-reference/graph/#stream) 或 [`streamAsync()`](../../../api-reference/graph/#streamAsync) 方法：

| 模式       | 描述                                                                                                                                                                         |
| ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `values`   | 在图的每个步骤后流式传输状态的完整值。                                                                                                                                       |
| `updates`  | 在图的每个步骤后流式传输状态的更新。如果在同一步骤中进行多次更新（例如，运行多个节点），这些更新将分别流式传输。                                                           |
| `custom`   | 从图节点内部流式传输自定义数据。                                                                                                                                             |
| `messages` | 从调用 LLM 的任何图节点流式传输 2 元组（LLM 令牌，元数据）。                                                                                                                |
| `debug`    | 在图的执行过程中流式传输尽可能多的信息。                                                                                                                                     |

## 流式处理的优势

### 实时反馈
用户可以立即看到处理进度，而不需要等待整个任务完成。

### 透明度
通过流式传输中间步骤，用户可以了解系统正在执行的操作。

### 响应性
应用程序感觉更加响应，即使在处理长时间运行的任务时也是如此。

### 调试能力
开发者可以实时观察系统行为，便于调试和优化。

## 使用场景

### 智能体对话
在智能体生成回复时，逐步显示生成的文本，提供类似打字机的效果。

### 工作流执行
在复杂的多步骤工作流中，显示每个步骤的执行状态和结果。

### 数据处理
在处理大量数据时，显示处理进度和中间结果。

### 工具调用
在调用外部工具或API时，显示调用状态和进度信息。

## 下一步

- [智能体流式处理](./agent-streaming) - 学习如何从智能体流式传输数据
- [工作流流式处理](./workflow-streaming) - 了解工作流的流式处理
- [自定义流式数据](./custom-streaming) - 发送自定义流式数据
- [性能优化](./performance) - 优化流式处理性能
