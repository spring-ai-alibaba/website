---
title: "智能体 (Agent) 与工作流 (Workflow)"
description: "深入理解 SAA 中 Workflow 与 Agent 的核心区别与联系，以及如何基于核心引擎 StateGraph 构建并组合它们。"
---

## 什么是智能体 (Agent)？

在人工智能领域，**智能体 (Agent)** 是指一个能够自主感知环境、进行规划决策、并执行任务的软件实体。其核心通常由**大型语言模型 (LLM)** 驱动，赋予其强大的推理能力。Agent 通过使用一系列**工具 (Tools)** 来与外部世界交互，从而完成超越纯文本生成的复杂任务。

一个典型的 Agent 工作循环包含以下步骤：
-   **感知 (Perceive)**: 理解用户的自然语言指令或外部系统的事件。
-   **思考 (Think)**: 基于当前状态和可用工具，进行推理和规划。
-   **行动 (Act)**: 调用工具（如 API）与外部世界交互，或生成回复给用户。

## SAA 的实现：分层的架构

理解了 Agent 的通用概念后，我们来看看 SAA 是如何通过其独特的架构来实现并赋能 Agent 开发的。SAA 的设计哲学是分层的，它提供了一个强大的底层引擎，并在其上构建了不同抽象层次的 API。

### 核心引擎：StateGraph

在 SAA 框架中，所有智能流程的基石是其底层引擎：**`StateGraph` (状态图)**。

`StateGraph` 是一个受 LangGraph 启发的、通用的、有状态的图工作流引擎。它允许开发者通过定义**状态 (State)**、**节点 (Nodes)** 和**边 (Edges)** 来构建任何复杂的、有状态的流程。

### Workflow 与 Agent：从底层 API 到高级封装

基于 `StateGraph` 这一底层引擎，SAA 提供了两种不同抽象层次的构建方式：`Workflow` 和 `Agent`。

#### Workflow (工作流)

> 在 SAA 的语境下，**工作流 (Workflow)** 特指任何**直接使用 `StateGraph` 底层 API** 构建的、定制化的 AI 流程。

这是一种“手动挡”模式，它赋予开发者极致的灵活性和控制力。你可以自由地定义图中的每一个节点、每一条边以及状态的更新方式，来创造出完全符合你业务需求的、独特的 AI 应用。

#### Agent (智能体)

> **智能体 (Agent)** 则是 SAA 在 `StateGraph` 之上提供的、**预先封装了特定设计模式的高级抽象**。

这是一种“自动挡”模式或“最佳实践模板”。SAA 团队发现，许多 AI 应用都会重复一些经典的模式（如 ReAct 循环、多智能体协作等）。为了避免开发者重复“造轮子”，SAA 将这些成熟的 `Workflow` 模式封装成了便捷的 `Agent` 类，让开发者可以通过更简单的配置来快速搭建应用。

**简而言之，`Agent` 就是一种预置了最佳实践的、可复用的 `Workflow`。**

## 开箱即用的 Agent 模式

SAA 框架提供了两种核心的 `Agent` 模式封装：

### 1. 单智能体模式 (Single-Agent Pattern) - `ReactAgent`

`ReactAgent` 是对经典的“**思考-行动 (Reason-Act)**”循环 `Workflow` 的封装。

它内部预置了一个由“LLM 节点”和“Tool 节点”构成的 `StateGraph`，完美实现了 ReAct 逻辑。开发者无需手动搭建这个循环，只需通过 `ReactAgent` 的 Builder 提供 LLM 和工具，即可快速获得一个具备自主规划和工具调用能力的智能体。

### 2. 多智能体模式 (Multi-Agent Pattern) - `FlowAgent`

`FlowAgent` 是对“**多智能体协作**” `Workflow` 的封装。

它同样是一个高级抽象，其内部的 `StateGraph` 专注于**编排和调度多个子智能体**。开发者无需关心底层的图路由和状态传递，只需声明式地定义子智能体之间的协作关系，即可构建强大的**多智能体系统 (Multi-Agent System)**。`FlowAgent` 提供了多种开箱即用的编排策略，如 `SequentialAgent` (顺序), `ParallelAgent` (并行) 等。

## 多智能体系统与 A2A 支持

SAA 对多智能体系统提供了全面的支持：

-   **应用内协作**: `FlowAgent` 是在**单一应用内部**构建多智能体系统的核心工具，用于组织和协调应用内的多个智能体。
-   **跨应用协作**: 当智能体需要**跨应用、跨网络**进行通信时，就需要一个标准的协议。SAA 通过 `spring-ai-alibaba-a2a` 模块原生支持了 **A2A (Agent-to-Agent) 协议**，使得任何一个 SAA 智能体都可以被发布为一个标准的服务，被其他任何遵循 A2A 协议的外部智能体发现和调用。

通过 `FlowAgent` 和 A2A 协议，SAA 为构建从简单到复杂的、从单体到分布式的多智能体系统提供了完整的解决方案。
