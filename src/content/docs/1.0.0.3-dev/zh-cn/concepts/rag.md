---
title: "RAG (Retrieval-Augmented Generation)"
description: "深入理解 RAG (检索增强生成) 的核心理念、工作流程，以及 SAA 为 RAG 提供的全面工具箱。"
---

## 核心理念：让大模型“开卷考试”

大型语言模型 (LLM) 如同一个知识渊博但记忆有时效性的“大脑”。它知道很多通用知识，但对**最新的信息**和你的**私有数据**（如企业内部文档）一无所知。直接向它提问这些领域的问题，就像让它进行一场“**闭卷考试**”，结果往往不尽人意。

**RAG (Retrieval-Augmented Generation, 检索增强生成)** 是一种强大的范式，它将“闭卷考试”变成了“**开卷考试**”。

它的核心思想是：在让 LLM 回答问题**之前**，先从一个或多个知识库中**检索 (Retrieval)** 出与问题最相关的上下文信息，然后将这些信息**增强 (Augmented)** 到提示词中，最后让 LLM 基于这些“参考资料”来**生成 (Generation)** 答案。

RAG 解决了 LLM 的几个核心痛点：
-   **知识时效性**：通过从外部知识库检索，LLM 可以回答其训练数据截止日期之后的问题。
-   **降低幻觉**：LLM 的回答将基于检索到的事实依据，而非凭空捏造。
-   **私域知识注入**：使 LLM 能够回答关于企业内部私有知识的问题。
-   **可解释性**：当 LLM 给出答案时，我们可以追溯到它所参考的原始文档，增强了答案的可靠性。

## RAG 的标准工作流

一个完整的 RAG 应用通常包含两个核心阶段：

### 阶段一：知识入库 (Indexing) - 准备“参考资料”

这是一个离线的预处理过程，旨在构建一个可被高效检索的知识库。

1.  **加载与解析 (Load & Parse)**：从多种数据源（PDF, Word, Markdown, 网站等）加载原始文档。
2.  **文本切分 (Split)**：将长文档切分成语义完整、大小适中的文本块 (Chunks)。这是确保检索质量的关键一步。
3.  **向量化 (Embed)**：使用**嵌入模型 (Embedding Model)** 将每个文本块转换成一个能代表其语义的数学向量。
4.  **存储 (Store)**：将文本块及其对应的向量存入专门的**向量数据库 (Vector Store)** 中。

### 阶段二：检索与生成 (Retrieval & Generation) - “开卷”回答

这是一个在线的实时过程，在用户提问时触发。

1.  **检索 (Retrieve)**：将用户的问题也进行向量化，然后去向量数据库中检索出语义最相似的文本块。
2.  **重排序 (Rerank) [可选]**：对于检索出的多个文本块，可以使用一个更轻量的模型（Reranker）对它们的**相关性进行重新打分和排序**，以将最关键的信息排在最前面。
3.  **增强生成 (Augment & Generate)**：将经过排序的、最相关的文本块与原始问题组合成一个丰富的提示词，并将其提交给 LLM，生成最终答案。

## SAA 的 RAG 工具箱

SAA 致力于为开发者提供一个**完整的、端到端的 RAG 解决方案**，它在 Spring AI 的基础上，提供了大量开箱即用的增强能力：

-   **丰富的文档解析器**: Spring AI 提供了基础的 `DocumentReader`，而 SAA 在此之上提供了更多、更强大的 **`DocumentParser`** 实现，能够深度解析 PDF, Word, Excel, Markdown 等复杂文档格式，并保留其原始结构。
-   **多样的检索器 (`Retriever`)**: SAA 提供了对接多种企业级知识源的 `Retriever` 实现，如 `DashScopeDocumentRetriever` (通义百炼)，并支持混合检索等高级策略，为开发者提供了灵活的数据接入能力。
-   **与 Agent 框架的无缝集成**: RAG 的能力被无缝封装为 `KnowledgeRetrievalNode`，可以作为一个标准节点被轻松地集成到任何 `StateGraph` 或 `Agent` 中。这使得你的智能体可以在其工作流的任何一步，按需地去“查阅资料”。
-   **企业级的工程化支持**: `spring-ai-alibaba-studio` 提供了一整套可视化的知识库管理、文档处理、索引构建和测试评估工具，极大地降低了企业落地 RAG 应用的工程复杂度。

## 进一步阅读

SAA 的 RAG 能力构建在 Spring AI 提供的坚实基础之上。如果你希望深入了解其底层的 `VectorStore`, `Retriever` 和 `Advisor` 等核心抽象，我们强烈建议您阅读：

> [Spring AI 官方关于 RAG 的文档](https://docs.spring.io/spring-ai/reference/api/retrieval-augmented-generation.html)
